<edit-config xmlns:ns0="http://cisco.com/ns/yang/ned/ios">
	<target>
		<running />
	</target>
<config>
    <ns0:native>
      <ns0:vrf>
        <ns0:definition>
          <ns0:name>IWAN-GUEST</ns0:name>
          <ns0:address-family>
            <ns0:ipv4 />
          </ns0:address-family>
        </ns0:definition>
      </ns0:vrf>
      <ns0:ip>
        <ns0:route>
          <ns0:vrf>
            <ns0:name>IWAN-GUEST</ns0:name>
            <ns0:ip-route-interface-forwarding-list>
              <ns0:prefix>0.0.0.0</ns0:prefix>
              <ns0:mask>0.0.0.0</ns0:mask>
              <ns0:fwd-list>
                <ns0:fwd>GigabitEthernet0/0/0</ns0:fwd>
                <ns0:forwarding-router-adr annotation="!ip route vrf IWAN-GUEST 0.0.0.0 0.0.0.0 $DIA_LAN_INTERFACE $DIA_WAN_IPV4_ADDRESS">{{ aGrouping.DIA_LAN_INTERFACE | string() }}</ns0:forwarding-router-adr>
              </ns0:fwd-list>
            </ns0:ip-route-interface-forwarding-list>
          </ns0:vrf>
        </ns0:route>
        <ns0:access-list>
          <ns0:extended>
            <ns0:name>GUEST-INET</ns0:name>
          </ns0:extended>
          <ns0:extended annotation="!permit ip $DIA_LAN_SUBNET_ADDRESS $DIA_LAN_REVERSE_SUBNET_MASK any %  permit ip 192.168.192.0 0.0.0.255 any">
            <ns0:name>{{ aGrouping.DIA_LAN_SUBNET_ADDRESS | ipv4('address') }}</ns0:name>
          </ns0:extended>
        </ns0:access-list>
      </ns0:ip>
      <ns0:interface>
        <ns0:GigabitEthernet annotation="!interface $DIA_LAN_INTERFACE.$DIA_LAN_VLAN">
          <ns0:name>{{ aGrouping.DIA_LAN_INTERFACE | string() }}</ns0:name>
          <ns0:encapsulation>{{ aGrouping.DIA_LAN_VLAN | int() }}<ns0:dot1Q>
              <ns0:vlan-id annotation="!encapsulation dot1Q $DIA_LAN_VLAN">{{ aGrouping.DIA_LAN_VLAN | int() }}</ns0:vlan-id>
            </ns0:dot1Q>
          </ns0:encapsulation>
          <ns0:vrf>
            <ns0:forwarding>IWAN-GUEST</ns0:forwarding>
          </ns0:vrf>
          <ns0:ip>
            <ns0:address>
              <ns0:primary>
                <ns0:address annotation="!ip address $DIA_LAN_IPV4_ADDRESS $DIA_LAN_SUBNET_MASK">{{ aGrouping.DIA_LAN_IPV4_ADDRESS | ipv4('address') }}</ns0:address>
                <ns0:mask>255.255.255.0</ns0:mask>
              </ns0:primary>
            </ns0:address>
            <ns0:nat>
              <ns0:inside />
            </ns0:nat>
          </ns0:ip>
          <ns0:standby>
            <ns0:standby-list>
              <ns0:group-number>1</ns0:group-number>
              <ns0:ip>
                <ns0:address annotation="!standby 1 ip $DIA_LAN_HSRP_IPV4_ADDRESS">{{ aGrouping.DIA_LAN_HSRP_IPV4_ADDRESS | ipv4('address') }}</ns0:address>
              </ns0:ip>
              <ns0:preempt />
              <ns0:priority annotation="!standby 1 priority $DIA_LAN_HSRP_PRIORITY">{{ aGrouping.DIA_LAN_HSRP_PRIORITY | int() }}</ns0:priority>
            </ns0:standby-list>
          </ns0:standby>
          <ns0:zone-member>
            <ns0:security>GUEST</ns0:security>
          </ns0:zone-member>
        </ns0:GigabitEthernet>
        <ns0:GigabitEthernet annotation="!interface $DIA_WAN_INTERFACE">
          <ns0:name>{{ aGrouping.DIA_WAN_INTERFACE | string() }}</ns0:name>
          <ns0:ip>
            <ns0:nat>
              <ns0:outside />
            </ns0:nat>
          </ns0:ip>
          <ns0:zone-member>
            <ns0:security>OUTSIDE</ns0:security>
          </ns0:zone-member>
        </ns0:GigabitEthernet>
      </ns0:interface>
      <ns0:route-map>
        <ns0:name>GUEST-NAT-INET</ns0:name>
        <ns0:route-map-seq>
          <ns0:sequence>10</ns0:sequence>
          <ns0:operation>permit</ns0:operation>
          <ns0:match>
            <ns0:ip>
              <ns0:address>
                <ns0:access-list>GUEST-INET</ns0:access-list>
              </ns0:address>
            </ns0:ip>
          </ns0:match>
        </ns0:route-map-seq>
      </ns0:route-map>
      <ns0:class-map>
        <ns0:name>GUEST-RTR-DHCP</ns0:name>
        <ns0:type>inspect</ns0:type>
        <ns0:prematch>match-any</ns0:prematch>
        <ns0:match>
          <ns0:access-group>
            <ns0:name>GUEST-DHCP-IN</ns0:name>
          </ns0:access-group>
        </ns0:match>
      </ns0:class-map>
      <ns0:class-map>
        <ns0:name>GUEST-RTR-ICMP</ns0:name>
        <ns0:type>inspect</ns0:type>
        <ns0:prematch>match-any</ns0:prematch>
        <ns0:match>
          <ns0:access-group>
            <ns0:name>GUEST-ICMP-IN</ns0:name>
          </ns0:access-group>
        </ns0:match>
      </ns0:class-map>
      <ns0:class-map>
        <ns0:name>GUEST-TO-INSIDE-CLASS</ns0:name>
        <ns0:type>inspect</ns0:type>
        <ns0:prematch>match-any</ns0:prematch>
        <ns0:match>
          <ns0:access-group>
            <ns0:name>GUEST-IN</ns0:name>
          </ns0:access-group>
          <ns0:protocol>
            <ns0:protocols>udp</ns0:protocols>
            <ns0:icmp />
          </ns0:protocol>
        </ns0:match>
      </ns0:class-map>
      <ns0:class-map>
        <ns0:name>GUEST-TO-OUTSIDE-CLASS</ns0:name>
        <ns0:type>inspect</ns0:type>
        <ns0:prematch>match-any</ns0:prematch>
        <ns0:match>
          <ns0:access-group>
            <ns0:name>GUEST-OUT</ns0:name>
          </ns0:access-group>
          <ns0:protocol>
            <ns0:protocols>https</ns0:protocols>
            <ns0:ftp />
            <ns0:http />
          </ns0:protocol>
        </ns0:match>
      </ns0:class-map>
      <ns0:class-map>
        <ns0:name>RTR-GUEST-DHCP</ns0:name>
        <ns0:type>inspect</ns0:type>
        <ns0:prematch>match-any</ns0:prematch>
        <ns0:match>
          <ns0:access-group>
            <ns0:name>GUEST-DHCP-OUT</ns0:name>
          </ns0:access-group>
        </ns0:match>
      </ns0:class-map>
      <ns0:class-map>
        <ns0:name>RTR-GUEST-ICMP</ns0:name>
        <ns0:type>inspect</ns0:type>
        <ns0:prematch>match-any</ns0:prematch>
        <ns0:match>
          <ns0:access-group>
            <ns0:name>GUEST-ICMP-OUT</ns0:name>
          </ns0:access-group>
        </ns0:match>
      </ns0:class-map>
      <ns0:policy-map>
        <ns0:name>GUEST-SELF-POLICY-IN</ns0:name>
        <ns0:type>inspect</ns0:type>
        <ns0:class>
          <ns0:name>GUEST-RTR-DHCP</ns0:name>
          <ns0:type>inspect</ns0:type>
          <ns0:policy>
            <ns0:action>pass</ns0:action>
          </ns0:policy>
        </ns0:class>
        <ns0:class>
          <ns0:name>GUEST-RTR-ICMP</ns0:name>
          <ns0:type>inspect</ns0:type>
          <ns0:policy>
            <ns0:action>inspect</ns0:action>
          </ns0:policy>
        </ns0:class>
        <ns0:class>
          <ns0:name>class-default</ns0:name>
          <ns0:policy>
            <ns0:action>drop</ns0:action>
          </ns0:policy>
        </ns0:class>
      </ns0:policy-map>
      <ns0:policy-map>
        <ns0:name>GUEST-SELF-POLICY-OUT</ns0:name>
        <ns0:type>inspect</ns0:type>
        <ns0:class>
          <ns0:name>RTR-GUEST-DHCP</ns0:name>
          <ns0:type>inspect</ns0:type>
          <ns0:policy>
            <ns0:action>pass</ns0:action>
          </ns0:policy>
        </ns0:class>
        <ns0:class>
          <ns0:name>RTR-GUEST-ICMP</ns0:name>
          <ns0:type>inspect</ns0:type>
          <ns0:policy>
            <ns0:action>inspect</ns0:action>
          </ns0:policy>
        </ns0:class>
        <ns0:class>
          <ns0:name>class-default</ns0:name>
          <ns0:policy>
            <ns0:action>drop</ns0:action>
          </ns0:policy>
        </ns0:class>
      </ns0:policy-map>
      <ns0:policy-map>
        <ns0:name>GUEST-TO-INSIDE-POLICY</ns0:name>
        <ns0:type>inspect</ns0:type>
        <ns0:class>
          <ns0:name>GUEST-TO-INSIDE-CLASS</ns0:name>
          <ns0:type>inspect</ns0:type>
          <ns0:policy>
            <ns0:action>inspect</ns0:action>
          </ns0:policy>
        </ns0:class>
        <ns0:class>
          <ns0:name>class-default</ns0:name>
          <ns0:policy>
            <ns0:action>drop</ns0:action>
          </ns0:policy>
        </ns0:class>
      </ns0:policy-map>
      <ns0:policy-map>
        <ns0:name>GUEST-TO-OUTSIDE-POLICY</ns0:name>
        <ns0:type>inspect</ns0:type>
        <ns0:class>
          <ns0:name>GUEST-TO-OUTSIDE-CLASS</ns0:name>
          <ns0:type>inspect</ns0:type>
          <ns0:policy>
            <ns0:action>inspect</ns0:action>
          </ns0:policy>
        </ns0:class>
        <ns0:class>
          <ns0:name>class-default</ns0:name>
          <ns0:policy>
            <ns0:action>drop</ns0:action>
          </ns0:policy>
        </ns0:class>
      </ns0:policy-map>
      <ns0:zone>
        <ns0:security>
          <ns0:id>GUEST</ns0:id>
        </ns0:security>
        <ns0:security>
          <ns0:id>OUTSIDE</ns0:id>
        </ns0:security>
        <ns0:security>
          <ns0:id>default</ns0:id>
        </ns0:security>
      </ns0:zone>
      <ns0:zone-pair>
        <ns0:security>
          <ns0:id>FROM-ROUTER</ns0:id>
          <ns0:source>self</ns0:source>
          <ns0:destination>OUTSIDE</ns0:destination>
          <ns0:service-policy>
            <ns0:type>
              <ns0:inspect>ACL-OUT-POLICY</ns0:inspect>
            </ns0:type>
          </ns0:service-policy>
        </ns0:security>
        <ns0:security>
          <ns0:id>GUEST-IN</ns0:id>
          <ns0:source>GUEST</ns0:source>
          <ns0:destination>default</ns0:destination>
          <ns0:service-policy>
            <ns0:type>
              <ns0:inspect>GUEST-TO-INSIDE-POLICY</ns0:inspect>
            </ns0:type>
          </ns0:service-policy>
        </ns0:security>
        <ns0:security>
          <ns0:id>GUEST-OUT</ns0:id>
          <ns0:source>GUEST</ns0:source>
          <ns0:destination>OUTSIDE</ns0:destination>
          <ns0:service-policy>
            <ns0:type>
              <ns0:inspect>GUEST-TO-OUTSIDE-POLICY</ns0:inspect>
            </ns0:type>
          </ns0:service-policy>
        </ns0:security>
        <ns0:security>
          <ns0:id>GUEST-RTR-IN</ns0:id>
          <ns0:source>GUEST</ns0:source>
          <ns0:destination>self</ns0:destination>
          <ns0:service-policy>
            <ns0:type>
              <ns0:inspect>GUEST-SELF-POLICY-IN</ns0:inspect>
            </ns0:type>
          </ns0:service-policy>
        </ns0:security>
        <ns0:security>
          <ns0:id>IN_OUT</ns0:id>
          <ns0:source>default</ns0:source>
          <ns0:destination>OUTSIDE</ns0:destination>
          <ns0:service-policy>
            <ns0:type>
              <ns0:inspect>INSIDE-TO-OUTSIDE-POLICY</ns0:inspect>
            </ns0:type>
          </ns0:service-policy>
        </ns0:security>
        <ns0:security>
          <ns0:id>TO-ROUTER</ns0:id>
          <ns0:source>OUTSIDE</ns0:source>
          <ns0:destination>self</ns0:destination>
          <ns0:service-policy>
            <ns0:type>
              <ns0:inspect>ACL-IN-POLICY</ns0:inspect>
            </ns0:type>
          </ns0:service-policy>
        </ns0:security>
      </ns0:zone-pair>
    </ns0:native>
  </config>
</edit-config>